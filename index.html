<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Advanced Resizable Layout</title>
  <style>
    :root{
      --bg:#0b0f1a;
      --panel:#0f1730;
      --panel2:#0c1326;
      --line:#2a3b78;
      --text:#e9eeff;
      --muted:#a7b3e6;
      --accent:#7c4dff;
      --shadow: 0 10px 30px rgba(0,0,0,.35);
      --divider: 10px;
      --radius: 14px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      background: radial-gradient(1200px 800px at 20% 10%, rgba(124,77,255,.25), transparent 55%),
                  radial-gradient(1100px 900px at 80% 30%, rgba(70,170,255,.18), transparent 55%),
                  var(--bg);
      color:var(--text);
      overflow:hidden;
    }

    /* Top bar */
    .topbar{
      height:52px;
      display:flex;
      align-items:center;
      gap:10px;
      padding:10px 12px;
      border-bottom:1px solid rgba(255,255,255,.06);
      background: rgba(10,14,28,.75);
      backdrop-filter: blur(10px);
      position:sticky; top:0;
      z-index:10;
    }
    .btn{
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.06);
      color:var(--text);
      padding:8px 10px;
      border-radius:10px;
      cursor:pointer;
      user-select:none;
      transition:.15s;
    }
    .btn:hover{ transform: translateY(-1px); border-color: rgba(124,77,255,.55); }
    .pill{
      margin-left:auto;
      font-size:12px;
      color:var(--muted);
      display:flex;
      gap:8px;
      align-items:center;
      padding:6px 10px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.08);
      background: rgba(255,255,255,.04);
    }
    .kbd{
      font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
      font-size:11px;
      padding:2px 6px;
      border-radius:8px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.25);
      color:var(--text);
    }

    /* Layout */
    .wrap{
      height: calc(100% - 52px);
      padding: 12px;
    }
    .grid{
      height:100%;
      display:grid;
      grid-template-columns: minmax(200px, var(--leftW, 320px)) var(--divider) minmax(260px, 1fr);
      gap:0;
      border-radius: var(--radius);
      overflow:hidden;
      box-shadow: var(--shadow);
      border:1px solid rgba(255,255,255,.08);
      background: rgba(255,255,255,.03);
    }
    .panel{
      height:100%;
      padding:14px;
      overflow:auto;
    }
    .left{ background: linear-gradient(180deg, rgba(124,77,255,.12), transparent 40%), var(--panel2); }
    .right{ background: linear-gradient(180deg, rgba(70,170,255,.10), transparent 42%), var(--panel); }

    /* Divider */
    .divider{
      position:relative;
      background: linear-gradient(180deg, rgba(124,77,255,.25), rgba(42,59,120,.35));
      cursor: col-resize;
      user-select:none;
    }
    .divider::after{
      content:"";
      position:absolute;
      inset: 6px 3px;
      border-radius: 999px;
      background: rgba(255,255,255,.12);
      box-shadow: 0 0 0 1px rgba(0,0,0,.25) inset;
    }
    .dragging *{ cursor: col-resize !important; }

    /* Card content */
    .card{
      border:1px solid rgba(255,255,255,.08);
      background: rgba(0,0,0,.18);
      border-radius: 14px;
      padding: 12px;
      margin-bottom: 12px;
    }
    h2{ margin:0 0 8px 0; font-size:16px; letter-spacing:.2px; }
    p{ margin:0; color:var(--muted); line-height:1.45; font-size:13px; }
    .small{ font-size:12px; color:var(--muted); }

    /* Collapse state */
    .collapsed .grid{
      grid-template-columns: 0px var(--divider) 1fr;
    }
    .collapsed .left{ display:none; }
    .collapsed .divider{ cursor: default; opacity:.45; }

    /* Mobile: stack */
    @media (max-width: 860px){
      body{ overflow:auto; }
      .wrap{ height:auto; }
      .grid{
        height:auto;
        grid-template-columns: 1fr;
      }
      .divider{ display:none; }
      .panel{ min-height: 45vh; }
    }
  </style>
</head>
<body>
  <div class="topbar">
    <button class="btn" id="btnReset">Reset layout</button>
    <button class="btn" id="btnCollapse">Toggle left panel</button>
    <button class="btn" id="btnFullscreen">Fullscreen</button>

    <div class="pill">
      Drag divider •
      <span class="kbd">Alt</span> + <span class="kbd">←</span>/<span class="kbd">→</span> resize •
      <span class="kbd">R</span> reset
    </div>
  </div>

  <div class="wrap" id="wrap">
    <div class="grid" id="grid">
      <div class="panel left" id="left">
        <div class="card">
          <h2>Left Panel</h2>
          <p>Edit me. This could be your playlists, folders, settings, etc.</p>
        </div>
        <div class="card">
          <h2>Quick notes</h2>
          <p class="small">
            • Layout width is saved automatically.<br/>
            • Divider is draggable.<br/>
            • Mobile stacks panels.
          </p>
        </div>
      </div>

      <div class="divider" id="divider" title="Drag to resize"></div>

      <div class="panel right" id="right">
        <div class="card">
          <h2>Right Panel</h2>
          <p>This is your main content area. Put your player here later.</p>
        </div>
        <div class="card">
          <h2>Try it</h2>
          <p class="small">Drag the divider. Press <b>R</b> to reset. Hold <b>Alt</b> and press arrow keys to resize.</p>
        </div>
      </div>
    </div>
  </div>

  <script>
    const wrap = document.getElementById("wrap");
    const divider = document.getElementById("divider");
    const btnReset = document.getElementById("btnReset");
    const btnCollapse = document.getElementById("btnCollapse");
    const btnFullscreen = document.getElementById("btnFullscreen");

    const KEY = "advResizable.leftW";
    const KEY_COLLAPSE = "advResizable.collapsed";

    let dragging = false;
    let leftW = 320;

    function clamp(n, min, max){ return Math.max(min, Math.min(max, n)); }

    function setLeftWidth(px){
      leftW = px;
      document.documentElement.style.setProperty("--leftW", px + "px");
      localStorage.setItem(KEY, String(px));
    }

    function load(){
      const saved = Number(localStorage.getItem(KEY));
      if (!Number.isNaN(saved) && saved > 0) setLeftWidth(saved);
      const collapsed = localStorage.getItem(KEY_COLLAPSE) === "1";
      document.body.classList.toggle("collapsed", collapsed);
    }

    function reset(){
      document.body.classList.remove("collapsed");
      localStorage.setItem(KEY_COLLAPSE, "0");
      setLeftWidth(320);
    }

    function toggleCollapse(){
      const next = !document.body.classList.contains("collapsed");
      document.body.classList.toggle("collapsed", next);
      localStorage.setItem(KEY_COLLAPSE, next ? "1" : "0");
    }

    function onPointerDown(e){
      if (document.body.classList.contains("collapsed")) return;
      dragging = true;
      document.body.classList.add("dragging");
      divider.setPointerCapture(e.pointerId);
    }

    function onPointerMove(e){
      if (!dragging) return;
      const rect = wrap.getBoundingClientRect();
      const x = e.clientX - rect.left;
      // leave room for right panel min width
      const minLeft = 200;
      const maxLeft = rect.width - 260 - 10; // right min - divider
      setLeftWidth(clamp(x, minLeft, maxLeft));
    }

    function onPointerUp(){
      if (!dragging) return;
      dragging = false;
      document.body.classList.remove("dragging");
    }

    async function toggleFullscreen(){
      try{
        if (!document.fullscreenElement) await document.documentElement.requestFullscreen();
        else await document.exitFullscreen();
      }catch{}
    }

    // Buttons
    btnReset.addEventListener("click", reset);
    btnCollapse.addEventListener("click", toggleCollapse);
    btnFullscreen.addEventListener("click", toggleFullscreen);

    // Pointer events
    divider.addEventListener("pointerdown", onPointerDown);
    window.addEventListener("pointermove", onPointerMove);
    window.addEventListener("pointerup", onPointerUp);

    // Keyboard resize (Alt + arrows), reset (R)
    window.addEventListener("keydown", (e) => {
      if (e.key.toLowerCase() === "r" && !e.repeat) reset();
      if (!e.altKey) return;
      if (document.body.classList.contains("collapsed")) return;

      const rect = wrap.getBoundingClientRect();
      const step = e.shiftKey ? 40 : 20;
      const minLeft = 200;
      const maxLeft = rect.width - 260 - 10;

      if (e.key === "ArrowLeft") setLeftWidth(clamp(leftW - step, minLeft, maxLeft));
      if (e.key === "ArrowRight") setLeftWidth(clamp(leftW + step, minLeft, maxLeft));
    });

    load();
  </script>
</body>
</html>
